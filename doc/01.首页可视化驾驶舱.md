# 首页可视化驾驶舱 - 产品功能设计

## 一、产品定位

**准实时监控工作台**，面向多角色用户，提供当日/近期生产质量的全景视图。

### 目标用户

| 角色 | 典型场景 | 关注点 |
|-----|---------|-------|
| 车间主任 | 每天早会看昨日数据 | 产量达成、异常批次 |
| 质检主管 | 实时监控生产线 | 合格率波动、缺陷分布 |
| 工艺工程师 | 分析工艺参数 | 指标关联、最佳窗口 |
| 高层领导 | 周/月度汇报 | 整体趋势、KPI达成 |

### 数据时效性

- 准实时刷新（5-15分钟间隔）
- 定时汇总报表功能单独实现

---

## 二、页面布局

采用四象限布局 + 顶部全局控制区：

```
┌─────────────────────────────────────────────────────────┐
│                    全局控制区（筛选器）                    │
├───────────────────────────┬─────────────────────────────┤
│                           │                             │
│      左上：核心指标区       │      右上：质量诊断区         │
│                           │                             │
├───────────────────────────┼─────────────────────────────┤
│                           │                             │
│      左下：工艺监控区       │      右下：趋势与预警区       │
│                           │                             │
└───────────────────────────┴─────────────────────────────┘
```

---

## 三、功能模块详细设计

### 3.1 顶部：全局控制区

所有图表随筛选条件联动刷新。

| 筛选项 | 类型 | 说明 |
|-------|------|------|
| 日期范围 | 快捷按钮 + 日期选择器 | 今日 / 近7日 / 近30日 / 自定义 |
| 炉号 | 输入框 | 支持前缀模糊匹配 |
| 喷次 | 下拉多选 | - |
| 产品规格 | 下拉多选 | - |
| 班次 | 下拉多选 | 早班 / 中班 / 夜班 |
| 自动刷新 | 开关 + 间隔选择 | 5 / 10 / 15 分钟 |

---

### 3.2 左上：核心指标区

**目标**：一眼看清生产状态

#### 3.2.1 数字卡片组

| 指标 | 说明 | 展示形式 |
|-----|------|---------|
| 总产量 | 筛选范围内的卷数 | 数字 + 单位 |
| 总重量 | 筛选范围内的累计重量 | 数字 + 单位（吨） |
| 合格率 | 合格数 / 总数 × 100% | 数字 + 百分比 |
| 今日新增 | 今日新增卷数 | 数字 + 环比箭头 |

#### 3.2.2 合格率仪表盘

- 当前合格率指针
- 目标线标注（如95%）
- 颜色分区：红色（<90%）、黄色（90-95%）、绿色（>95%）

#### 3.2.3 实时状态条

展示最近录入的一卷数据：
- 炉号
- 录入时间
- 判定结果（合格/不合格标签）

---

### 3.3 右上：质量诊断区

**目标**：快速定位质量问题

#### 3.3.1 判定结果饼图（支持下钻）

**第一层**：合格 / 不合格 占比

**第二层（点击不合格后展开）**：
- 性能不合
- 外观不合
- 尺寸超差
- 其他

#### 3.3.2 缺陷 Top 5 排行榜

| 排名 | 缺陷类型 | 数量 | 占比 |
|-----|---------|------|------|
| 1 | 划痕 | 23 | 35% |
| 2 | 麻点 | 15 | 23% |
| ... | ... | ... | ... |

动态更新，展示当前筛选范围内最频发的缺陷类型。

---

### 3.4 左下：工艺监控区

**目标**：监控关键工艺指标

#### 3.4.1 厚度一致性曲线

- 横轴：20个测量点（N 到 AB）
- 纵轴：厚度值
- 展示模式切换：
  - 最近一卷：单条折线
  - 批次视图：均值线 + 上下限范围带

#### 3.4.2 叠片系数分布图

- 箱线图或直方图
- 展示分布范围和集中趋势
- 标注规格上下限

#### 3.4.3 关键指标卡片

| 指标 | 值 | 单位 |
|-----|---|------|
| 平均厚度 | 0.23 | mm |
| 厚度极差 | 0.015 | mm |
| 叠片系数均值 | 0.97 | - |

---

### 3.5 右下：趋势与预警区

**目标**：发现趋势、提前预警

#### 3.5.1 合格率趋势图

- 折线图
- 横轴：时间（按小时或班次）
- 纵轴：合格率（%）
- 目标线标注

#### 3.5.2 产量趋势图

- 柱状图
- 横轴：时间（按小时或班次）
- 纵轴：产量（卷数）

#### 3.5.3 预警提示列表

| 级别 | 预警内容 | 时间 |
|-----|---------|------|
| 黄灯 | 叠片系数连续3卷下降 | 10:32 |
| 红灯 | 炉号 A2301 合格率低于85% | 09:15 |

---

## 四、交互功能

### 4.1 图表下钻

- 点击饼图扇区：展开下一层或跳转明细列表
- 点击柱状图/折线图数据点：弹窗显示该时段明细

### 4.2 批次对比模式

- 选择两个炉号或喷次
- 弹窗对比展示：
  - 关键指标对比表
  - 厚度曲线叠加对比
  - 合格率对比

### 4.3 数据导出

- 导出当前视图数据为 Excel
- 包含筛选条件和时间戳

### 4.4 布局自定义

- 用户可拖拽调整模块位置
- 保存个人布局偏好

---

## 五、待讨论问题

### 5.1 不合格原因分类

目前的分类体系是什么？
- [ ] 性能不合 / 外观不合 / 尺寸超差（三类）
- [ ] 更细粒度的分类
- [ ] 其他

### 5.2 预警功能

第一期是否需要预警功能？
- [ ] 需要，作为核心功能
- [ ] 不需要，先做展示，后续迭代

### 5.3 批次对比

第一期是否需要批次对比功能？
- [ ] 需要
- [ ] 不需要，后续迭代

### 5.4 缺陷数据

目前外观缺陷数据是否已经在录入？
- [ ] 是，已有数据
- [ ] 否，需要先完善数据录入

---

## 六、迭代规划（建议）

### 第一期：核心展示

- 全局筛选器
- 核心指标卡片 + 合格率仪表盘
- 判定结果饼图（不含下钻）
- 合格率/产量趋势图

### 第二期：深度分析

- 饼图下钻功能
- 厚度一致性曲线
- 叠片系数分布图
- 缺陷 Top 5

### 第三期：智能预警

- 预警规则配置
- 预警提示列表
- 批次对比功能

### 第四期：个性化

- 布局自定义
- 数据导出
- 更多图表类型
