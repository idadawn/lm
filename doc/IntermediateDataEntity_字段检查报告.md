# IntermediateDataEntity 字段检查报告

## 检查时间
2026-01-20

## 一、重复列名检查

经过检查，**未发现重复的列名**。所有 `ColumnName` 都是唯一的。

## 二、缺失字段检查

### 1. 在代码中被引用但未定义的字段

#### 1.1 AppearanceFeatureIds
- **位置**: 第638行、第653行
- **问题**: 在 `AppearanceFeatureIdsList` 属性中被引用，但实体类中未定义
- **建议**: 需要添加 `F_APPEARANCE_FEATURE_IDS` 字段

### 2. 在注释中提到但未定义的字段

#### 2.1 F_FOUR_METER_WT（四米带材重量）
- **位置**: 第147行注释中提到
- **问题**: 注释说明 `F_ONE_METER_WT = F_FOUR_METER_WT / STD_LENGTH`，但 `F_FOUR_METER_WT` 字段未定义
- **建议**: 需要添加此字段

#### 2.2 F_AVG_THICKNESS（平均厚度）
- **位置**: 第324行、第330行注释中提到
- **问题**: 注释说明计算公式中使用了 `F_AVG_THICK`，但字段未定义
- **建议**: 需要添加此字段

#### 2.3 F_LAM_DIST_1..22（叠片分布1-22）
- **位置**: 第160行注释中提到
- **问题**: 注释说明 `F_THICK_i = F_LAM_DIST_i / LAYERS`，但 `F_LAM_DIST_1..22` 字段未定义
- **建议**: 需要添加这22个字段

#### 2.4 F_STRIP_WIDTH（带宽）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.5 F_APPEAR_FEATURE（外观特性）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.6 F_APPEAR_JUDGE（外观检验员）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.7 F_PERF_JUDGE_NAME（性能判定人）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.8 F_DATE_MONTH（日期月份）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.9 F_FURNACE_NO（原始炉号）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.10 F_FURNACE_NO_PARSED（解析后的炉号）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.11 F_SHIFT_NO（班次号）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.12 F_BATCH_NO（批次号）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.13 F_COIL_WEIGHT_KG（单卷重量kg）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.14 F_SEGMENT_TYPE（分段类型）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

#### 2.15 F_REMARK（备注）
- **位置**: 注释中提到
- **问题**: 字段未定义
- **建议**: 需要添加此字段

## 三、已存在的字段

以下字段已在实体类中定义：
- ✅ F_FIRST_INSPECTION（一次交检）- 第589行
- ✅ F_PRODUCT_SPEC_VERSION（产品规格版本）- 第619行（注意：类型是 string，不是 int）

## 四、建议

1. **立即修复**: 添加 `F_APPEARANCE_FEATURE_IDS` 字段（代码中已引用）
2. **重要字段**: 添加 `F_FOUR_METER_WT`、`F_AVG_THICKNESS`、`F_LAM_DIST_1..22`（计算公式中需要）
3. **其他字段**: 根据业务需求添加其他缺失字段

## 五、字段类型说明

- `F_PRODUCT_SPEC_VERSION`: 当前定义为 `string` 类型（varchar(50)），但根据之前的迁移脚本，中间数据表中应该是 `int` 类型。需要确认并修正。
